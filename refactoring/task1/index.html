<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>Рефакторинг. Задача 1</title>
</head>

<body>
    <h1>Задача 1</h1>
    <h2>Рефакторинг</h2>
    <p>Посмотрите на код:</p>
    <pre>
        <code>
            function func(s, a, b) {

                if (s.match(/^$/)) {
                    return -1;
                }
            
                var i = s.length -1;
                var aIndex =     -1;
                var bIndex =     -1;
            
                while ((aIndex == -1) && (bIndex == -1) && (i > 0)) {
                    if (s.substring(i, i +1) == a) {
                    aIndex = i;
                    }
                    if (s.substring(i, i +1) == b) {
                    bIndex = i;
                    }
                    i = i - 1;
                }
            
                if (aIndex != -1) {
                    if (bIndex == -1) {
                        return aIndex;
                    }
                    else {
                    return Math.max(aIndex, bIndex);
                    }
                }
            
                if (bIndex != -1) {
                    return bIndex;
                }
                else {
                    return -1;
                }
            }
        </code>
    </pre>
    <p>Что можно улучшить? Как бы вы его переписали?</p>
    <script src="task1.js"></script>
</body>

</html>